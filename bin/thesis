#!/bin/bash
# Start LaTeX 'environment' for PhD thesis

dir="/home/shark/t"
file="main.tex"

cd $dir

# this is rude:
silent killall okular
psgrep -n latexmk | awk '{print $2}' | xargs silent kill

# open okular in split view
silent i3-msg "split h"
silent okular "dist/main.pdf" &
sleep .5

# open latexmk on workspace 8
silent i3-msg "workspace 8"
silent i3-msg "move workspace to output left"
sleep .1
terminator -e "source ~/.zshrc && latexmk -pvc '$file'" &
sleep .2

# open vim
silent i3-msg "workspace 2"
silent i3-msg "focus left"
sleep .1
vim --servername vim "$file"
